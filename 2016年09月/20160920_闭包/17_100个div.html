<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css" id="css">
		#box {
			width: 400px;
			height: 400px;
			border: 2px solid #000;
			position: relative;
			background: #000;
			margin: 30px auto;
			perspective: 300px;
		}
		#box div {
			position: absolute;
			width: 38px;
			height: 38px;
			border: 1px solid #fff;
			transition: .5s;
			transform-style: preserve-3d;
		}
		#box span,
		#box em {
			position: absolute;
			width: 38px;
			height: 38px;
			left: 0;
			top: 0;
			backface-visibility: hidden;
		}
		#box span {
			transform: rotateY(180deg);
			background: url(img.png) no-repeat;
		}
		#box em {
			background: url(img.jpg) no-repeat;
		}
	</style>
	<script type="text/javascript">
		window.onload = function() {
			var box = document.querySelector("#box");
			var css = document.querySelector("#css");
			var div = box.getElementsByTagName("div");
			var divs = "";
			var style = "";
			var w = 40;
			var h = 40;
			for(var i = 0; i < 100; i++){
				var l = (i%10)*w;
				var t = parseInt(i/10)*h;

				divs += '<div class="div'+i+'"><span></span><em></em></div>';
				style += '.div'+i+'{left:'+l+'px;top:'+t+'px;}';
				style += '#box .div'+i+' span,#box .div'+i+' em{background-position: -'+l+'px -'+t+'px;}';
			}
			box.innerHTML = divs;
			css.innerHTML += style; 
			document.onclick = function() {
				for(var i = 0; i < div.length; i++){
					div[i].style.transition = ".5s "+i*50+"ms";
					div[i].style.transform = "rotateY(180deg)";
				}
			};

		};
	</script>
</head>
<body>
<div id="box"></div>
</body>
</html>