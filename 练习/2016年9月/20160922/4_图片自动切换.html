<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style>
	*{
		margin: 0;
		padding: 0;
	}
	li{
		list-style: none;
	}
	#wrap{
		width: 500px;
		height: 300px;
		margin: 30px auto 0;
		border: 5px #eee solid;
		position: relative;
		overflow: hidden;
	}
	#wrap ul{
		height: 300px;
		position: absolute;
		left: 0;
		top: 0;
		-webkit-transition:  .5s;
		-moz-transition:  .5s;
		-ms-transition:  .5s;
		-o-transition:  .5s;
		transition:  .5s;
	    
		-webkit-transition-delay:  .5s;
		-moz-transition-delay:  .5s;
		-ms-transition-delay:  .5s;
		-o-transition-delay:  .5s;
		transition-delay: .5s;
	}
	#wrap li{
		float: left;
	}
	#wrap img{
		width: 500px;
		height: 300px;
	}
	#wrap .box{
		width: 500px;
		height: 0	;
		position:absolute;
		background-color: rgba(0,0,0,.6);
		bottom: 0;
		color: #fff;
		-webkit-transition: height .5s;
		-moz-transition: height .5s;
		-ms-transition: height .5s;
		-o-transition: height .5s;
		transition: height .5s;
	}
	#wrap h3{
		font: 16px/30px "微软雅黑";
		margin: 0 20px;
	}
	#wrap p{
		font: 12px/24px "微软雅黑";
		text-indent: 2em;
		margin: 0 20px;
	}
	</style>
	<script>
	function css(el,attr){
		if(el.currentStyle) {
			return el.currentStyle[attr];	
		}
		return getComputedStyle(el)[attr];
	}
	window.onload = function(){
		var wrap = document.getElementById('wrap');
		var lis = document.querySelector('ul');
		var li = lis.querySelectorAll('li');
		var box = lis.querySelectorAll('div');
		lis.style.width = box.length + "00%";  //list的宽度等于li的个数成语100%
		// console.log(wrap,lis,li,imgs,box);
		var imgW = parseFloat(css(li[0],'width')); //图片宽度等于计算后的li宽度
		var timer = 0;
		var timer2 = 0;
		var now = 0;
		var taeget = 80;
		clearInterval(timer);  //清除计时器
		timer = setInterval(   //计时器开始
		 	function(){
		 		now++;  //当前++
		 		if(now > li.length-1){
		 			now = 0;     //如果now加到最后一张就返回第一张继续循环
		 		}
		 		for (var i = 0; i < li.length; i++) {
		 			li[i].index = now;
		 			for (var i = 0; i < li.length; i++) {
		 				lis.style.left = -imgW*now + 'px';  //lis的left值等于宽度乘以当前的个数
		 			};
		 		};
				
		 	
		 	},2000  //展示2秒
		 )
		wrap.onmouseover = function(){
			clearInterval(timer);
			clearInterval(timer2);
			console.log("停止");
		}
		wrap.onmouseout = function(){
			clearInterval(timer);
			timer = setInterval(   //计时器开始
		 	function(){
		 		now++;  //当前++
		 		if(now > li.length-1){
		 			now = 0;     //如果now加到最后一张就返回第一张继续循环
		 		}
		 		for (var i = 0; i < li.length; i++) {
		 			li[i].index = now;
		 			for (var i = 0; i < li.length; i++) {
		 				lis.style.left = -imgW*now + 'px';  //lis的left值等于宽度乘以当前的个数
		 			};
		 		};
			 	},2000  //展示2秒
			 )
			clearInterval(timer2);
			timer2 = setInterval(
				function(){
					for (var i = 0; i < box.length; i++) {
						var height = parseFloat(css(box[i],'height'));
						if(height){
							box[i].style.height = height - 100 + 'px';
						}else{
							box[i].style.height = height + 100 + 'px';
						}
					}
				},1000
			)
			console.log("继续");
		}
		clearInterval(timer2);
		timer2 = setInterval(
			function(){
				for (var i = 0; i < box.length; i++) {
					var height = parseFloat(css(box[i],'height'));
					if(height){
						box[i].style.height = height - 100 + 'px';
					}else{
						box[i].style.height = height + 100 + 'px';
					}
				}
			},1000
		)
	}
	</script>
</head>
<body>
	<div id="wrap">
		<ul>
			<li>
				<img src="images/img1.gif" alt="">
				<div class="box">
					<h3>Tab1</h3>
					<p>11111111111111111111111111111</p>
				</box>
			</li>
			<li>
				<img src="images/img2.gif" alt="">
				<div class="box">
					<h3>Tab2</h3>
					<p>22222222222222222222222222222222222222222222222222222222222222</p>
				</box>
			</li>
			<li>
				<img src="images/img3.gif" alt="">
				<div class="box">
					<h3>Tab3</h3>
					<p>333333333333333333333333333333333333333</p>
				</box>
			</li>
			<li>
				<img src="images/img4.gif" alt="">
				<div class="box">
					<h3>Tab4</h3>
					<p>44444444444444444444444444444444444444444444444444</p>
				</box>
			</li>
		</ul>
	</div>
</body>
</html>