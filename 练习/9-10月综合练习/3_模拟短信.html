<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Document</title>
	<style>
	body,div,p,img,input{
		margin: 0;
		padding: 0;
	}
	.clear{
		zoom: 1;
	}
	.clear:after{
		content: "";
		display: block;
		clear: both;
	}
	#wrap{
		width: 300px;
		margin: 30px auto;
		word-wrap: break-word;
	}
	#box{
		height: 400px;
		border:1px #000 solid;
		overflow: auto;
		padding:20px;
	}
	img{
		width: 30px;
		height: 30px;
		vertical-align: middle;
		border-radius: 50%;
	}
	.left{
		float: left;
		margin:5px 10px 5px 30px;
		position: relative;
	}
	.left img{
		position: absolute;
		left: -40px;
		top: 0;
		border-radius: 50%;
	}
	.left p,.right p{
		background: red;
		padding: 5px 12px;
		font: 12px/20px "微软雅黑";
		border-radius: 15px;
		word-break: break-all;
	}
	.right{
		float: right;
		margin:5px 30px 5px 10px;
		position: relative;
	}
	.right p{
		background: green;
	}
	.right img{
		position: absolute;
		right: -40px;
		top: 0;
		border-radius: 50%;
	}
	#message{
		padding: 10px;
	}
	</style>
</head>
<body>
	<div id="wrap">
		<div id="box">
			<!-- <div class="left clear">
				<img src="images/dx2.jpg">
				<p>2222222222</p>
			</div>
			<div class="right clear">
				<img src="images/dx1.jpg">
				<p>11111111111</p>
			</div> -->
		</div>
		<div id="message">
			<img src="images/dx1.jpg">
			<input type="text">
			<input type="button" value="发送">
		</div>
	</div>
</body>
<script>
	(function(){
		var box = document.querySelector('#box');
		var message = document.querySelector('#message')
		var img = message.querySelector('img');
		var text = document.querySelector('input[type="text"]');
		var btn = document.querySelector('input[type="button"]');
		var isImg = true;
		img.onclick = function(){
			if(isImg){
				img.src = "images/dx2.jpg";
			}else{
				img.src = "images/dx1.jpg";
			}
			isImg = !isImg;
		}
		btn.onclick = function(){
			if(text.value == ""){
				alert('请输入内容');
			}else{
				if(isImg){
					// box.innerHTML += '<div class="clear"><div class="left"><img src="images/dx1.jpg"><p>'+text.value+'</p></div></div>' ;
					var clear = document.createElement('div');
					var left = document.createElement('div');
					var img = new Image();
					var p = document.createElement('p');
					clear.className = "clear";
					left.className = "left";
					img.src = "images/dx1.jpg";
					p.innerHTML = text.value;
					
					left.appendChild(p);
					left.appendChild(img);
					clear.appendChild(left);
					box.appendChild(clear);

				}else{
					// box.innerHTML += '<div class="clear"><div class="right"><img src="images/dx2.jpg"><p>'+text.value+'</p></div></div>';
					var clear = document.createElement('div');
					var right = document.createElement('div');
					var img = new Image();
					var p = document.createElement('p');
					clear.className = "clear";
					right.className = "right";
					img.src = "images/dx1.jpg";
					p.innerHTML = text.value;
					
					right.appendChild(p);
					right.appendChild(img);
					clear.appendChild(right);
					box.appendChild(clear);
				}
				text.value = "";
			}
		}
	})();
</script>
</html>